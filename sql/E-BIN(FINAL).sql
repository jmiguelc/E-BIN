--BORRADO LAS TABLAS (COMENTAR EN LA PRIMERA EJECUCIÓN)
DROP TABLE PRODUCTO;
DROP TABLE ENTREGA;
DROP TABLE NOTICIA;
DROP TABLE FAQ;
DROP TABLE REGALO;
DROP TABLE CATEGORIA;
DROP TABLE DIRECCION;
DROP TABLE USUARIO;

--CREACIÓN DE TABLAS
CREATE TABLE USUARIO(
    IDUSU INTEGER, 
    LOGIN VARCHAR(50) UNIQUE NOT NULL,
    PASSWORD VARCHAR(90) NOT NULL,
    NOMBRE VARCHAR(50) NOT NULL,
    APELLIDOS VARCHAR(50) NOT NULL,
    TELEFONO VARCHAR(12),
    EMAIL VARCHAR(50) NOT NULL,
    EPOINT INTEGER DEFAULT 0,
    ADM BOOLEAN NOT NULL DEFAULT FALSE,
    CONSTRAINT PK_USU PRIMARY KEY(IDUSU)
);

CREATE TABLE DIRECCION(
    IDDIR INTEGER,
    IDUSU INTEGER,
    DIRECCION VARCHAR(50) NOT NULL,
    CONSTRAINT PK_DIR PRIMARY KEY (IDUSU,IDDIR),
    CONSTRAINT FK_DIR FOREIGN KEY (IDUSU) REFERENCES USUARIO(IDUSU)
);

CREATE TABLE CATEGORIA(
    IDCAT INTEGER, 
    NOMBRE VARCHAR(50) UNIQUE NOT NULL,
    DESCRIPCION VARCHAR(140),
    EPASOC INTEGER NOT NULL, --PUNTOS ASOCIADOS A LA CATEGORIA
    CONSTRAINT PK_CAT PRIMARY KEY(IDCAT)
);

CREATE TABLE REGALO(
    IDREG INTEGER, 
    NOMBRE VARCHAR(50) NOT NULL,
    DESCRIPCION VARCHAR(100),
    EPOINTS INTEGER NOT NULL,
    CANTIDAD INTEGER NOT NULL,
    CONSTRAINT PK_REG PRIMARY KEY(IDREG)
    
);

CREATE TABLE FAQ(
    IDFAQ INTEGER, 
    NOMBRE VARCHAR(50) NOT NULL,
    CONTENIDO VARCHAR(250) NOT NULL,
    CONSTRAINT PK_FAQ PRIMARY KEY(IDFAQ)
);

CREATE TABLE NOTICIA(
    IDNOTICIA INTEGER, 
    FECHA_ALTA TIMESTAMP NOT NULL,
    NOMBRE VARCHAR(50) NOT NULL,
    CONTENIDO VARCHAR(500) NOT NULL,
    CONSTRAINT PK_NOT PRIMARY KEY(IDNOTICIA)
);

CREATE TABLE ENTREGA(
    IDENTREGA INTEGER, 
    FECHA_ALTA TIMESTAMP NOT NULL,
    IDUSU INTEGER,
    IDDIR INTEGER,
    CONSTRAINT PK_ENT PRIMARY KEY(IDENTREGA),
    CONSTRAINT FK_ENT FOREIGN KEY(IDUSU) REFERENCES USUARIO(IDUSU),
    CONSTRAINT FK2_ENT FOREIGN KEY (IDUSU,IDDIR) REFERENCES DIRECCION(IDUSU,IDDIR)
);

CREATE TABLE PRODUCTO(
    IDPROD INTEGER, 
    NOMBRE VARCHAR(50) NOT NULL,
    DESCRIPCION VARCHAR(100),
    CANTIDAD INTEGER NOT NULL,
    IDCAT INTEGER NOT NULL,
    IDENTREGA INTEGER NOT NULL,
    CONSTRAINT PK_PROD PRIMARY KEY(IDPROD),
    CONSTRAINT FK_PROD_CAT FOREIGN KEY(IDCAT) REFERENCES CATEGORIA(IDCAT),
    CONSTRAINT FK_PROD_ENT FOREIGN KEY(IDENTREGA) REFERENCES ENTREGA(IDENTREGA)

);

--INSERCIÓN DE TUPLAS
--TABLA USUARIO
INSERT INTO APP.USUARIO VALUES (1,'admin','admin','Federico','Garcia','983256412','fede@mail.com',0,'true');
INSERT INTO APP.USUARIO VALUES (2,'josu','josu','Joseba','Clemente','979257012','josu@mail.com',50,'false');
INSERT INTO APP.USUARIO VALUES (3,'ebin','ebin','ebin','UVa','699584145','ebinssw2015@gmail.com',50,'false');
INSERT INTO APP.USUARIO VALUES (4,'paco','paco','Paco','','652321452','paco@mail.com',75,'false');

--TABLA DIRECCION
INSERT INTO APP.DIRECCION VALUES(1,1,'C/Sin techo 2 4A');
INSERT INTO APP.DIRECCION VALUES(2,1,'C/Recostada 23 6C');
INSERT INTO APP.DIRECCION VALUES(3,1,'Avda/Picoletos 1 3A');
INSERT INTO APP.DIRECCION VALUES(1,2,'C/León 32 3B');
INSERT INTO APP.DIRECCION VALUES(1,3,'C/universidad 3');
INSERT INTO APP.DIRECCION VALUES(1,4,'C/Murcia 42 4E');
--TABLA CATEGORIA
INSERT INTO CATEGORIA VALUES (1,'Componentes informaticos','cualquier producto relacionado con la informatica',80);
INSERT INTO CATEGORIA VALUES (2,'Moviles/tabletas','moviles de ultima generacion y los que no tambien',50);
INSERT INTO CATEGORIA VALUES (3,'Audio','productos relacionados con la reproduccion de sonido',30);
INSERT INTO CATEGORIA VALUES (4,'Video','productos relacionados con la reproduccion de video como camaras',30);
INSERT INTO CATEGORIA VALUES (5,'TV','de cualquier tamaño o tipo de pantalla',40);
INSERT INTO CATEGORIA VALUES (6,'Baterias/Pilas/Cargadores','todo tipo de bateria o pila que se ha gastado o se encuentra en mal estado y no es recargable',5);
INSERT INTO CATEGORIA VALUES (7,'Videoconsolas','de todas las versiones, actuales o no tanto',60);
INSERT INTO CATEGORIA VALUES (8,'Electrodomesticos','cualquier producto que se pueda encontrar en un hogar',70);
INSERT INTO CATEGORIA VALUES (9,'Otros','cualquier dispositivo electronico que no se encuentre que otra de las categorias anteriores',15);

--TABLA REGALO 
INSERT INTO REGALO VALUES (1,'NECESER VIAJE','Pequeño neceser para largos viajes.',50,500);
INSERT INTO REGALO VALUES (2,'CALCETIN MOVIL','Funda de tela protectora para móviles.',25,500);
INSERT INTO REGALO VALUES (3,'MOCHILA','Resistente mochila. Disponible en varios colores.',70,500);
INSERT INTO REGALO VALUES (4,'FUNDA IPAD','Funda protectora de piel. 9.7".',100,500);
INSERT INTO REGALO VALUES (5,'MALETIN','Maletín para pórtatiles de hasta 17". Dos compartimientos.',90,500);
INSERT INTO REGALO VALUES (6,'RELOJ','Reloj analógico de pared con forma de "@"',80,500);
INSERT INTO REGALO VALUES (7,'BASCULA','Discreta báscula, soporta hasta 150 kg.',150,500);
INSERT INTO REGALO VALUES (8,'EXPRIMIDOR','Exprimidor de frutas, ideal para zumos',120,500);

--TABLA FAQ
INSERT INTO FAQ VALUES (1,'Nuestro mundo y los nuevos residuos','Al cambiar nuestro mundo, también cambian los residuos que generamos. Para ello,tenemos que adaptar nuestra forma de reciclar.');
INSERT INTO FAQ VALUES (2,'¿Qué es E-BIN?','E-BIN es una plataforma web, donde se puede reciclar los residuos electrónicos que ya no se usen y que se quieran despender de ellos.');
INSERT INTO FAQ VALUES (3,'¿Para qué sirve E-BIN?','Se puede reciclar todos los productos electrónicos que ya no se utilizan sin tener que ir a ningún punto limpio cercano, además que se puede conseguir regalos con los puntos conseguidos al reciclar dichos productos electrónicos.');

--TABLA ENTREGA
INSERT INTO ENTREGA VALUES (1,'2015-01-29 18:00:00',2,1);
INSERT INTO ENTREGA VALUES (2,'2015-02-05 17:00:00',2,1);
INSERT INTO ENTREGA VALUES (3,'2015-02-10 13:00:00',4,1);
INSERT INTO ENTREGA VALUES (4,'2015-02-20 12:00:00',4,1);
INSERT INTO ENTREGA VALUES (5,'2015-02-11 11:50:40',1,2);
INSERT INTO ENTREGA VALUES (6,'2015-03-13 10:40:40.249',1,1);

--TABLA PRODUCTO
INSERT INTO PRODUCTO VALUES (1,'PLACA BASE ASUS','PLACA BASE ASUS K1300',1,1,1);
INSERT INTO PRODUCTO VALUES (2,'PILAS BOTON','PILAS DE BOTON DURACEL',5,6,1);
INSERT INTO PRODUCTO VALUES (3,'TELEVISION','TV SONY BRAVIA',1,5,2);
INSERT INTO PRODUCTO VALUES (4,'MOVIL LG','MOVIL LG INSERVIBLE',1,2,2);
INSERT INTO PRODUCTO VALUES (5,'PLAY STATION 2','PS2 CON EL LECTOR ESTROPEADO',1,7,3);
INSERT INTO PRODUCTO VALUES (6,'PILAS ALCALINAS AAA','PILAS ALKALINAS',10,6,3);
INSERT INTO PRODUCTO VALUES (7,'FRIGORIFICO BOSH','FRIGORIFICO CFC ESTROPEADO',1,8,4);
INSERT INTO PRODUCTO VALUES (8,'PORTATIL SONY VAIO','PORTATIL SONY VAIO PLACA BASE QUEMADA',1,5,4);
INSERT INTO PRODUCTO VALUES (9,'AURICULARES SONYA','AURICULARES CHINOS DE MARCA SONYA',1,5,4);

--TABLA NOTICIAS
INSERT INTO NOTICIA VALUES(1,'2015-03-01 00:00:00','Ya está disponible el nuevo catálogo de regalos','Visite nuestro nuevo catálogo de regalos y obtenga los productos que quiera mediante el canjeo de puntos en la sección <b>Regalos</b> :)');
